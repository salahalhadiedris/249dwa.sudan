// Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ§Øª - Ù…Ø­Ø¯Ø«Ø© Ø¨Ø§Ù„ØµÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
const pharmaciesDatabase = [
    {
        id: 1,
        name: "ØµÙŠØ¯Ù„ÙŠØ© Ù…Ù„Ø§Ø­ Ø§Ù„Ù‡Ø§Ø¯ÙŠ",
        location: "Ø§Ù„Ù‚Ø§Ù‡Ø±Ø© - Ø§Ù„Ù…Ø¹Ø§Ø¯ÙŠ",
        phone: "+201158968075",
        whatsapp: "+201158968075",
        image: "images/pharmacies/pharmacy1.jpg",
        featured: true,
        rating: 4.5
    },
    {
        id: 2,
        name: "ØµÙŠØ¯Ù„ÙŠØ© Ø£Ù…Ø©",
        location: "Ø§Ù„Ø¬ÙŠØ²Ø© - Ø§Ù„Ø¯Ù‚ÙŠ", 
        phone: "+201158968075",
        whatsapp: "+201158968075",
        image: "images/pharmacies/pharmacy2.jpg", // ØµÙˆØ±ØªÙƒ Ø§Ù„Ù„ÙŠ Ø§Ø´ØªØºÙ„Øª
        featured: true,
        rating: 4.2
    },
    {
        id: 3,
        name: "ØµÙŠØ¯Ù„ÙŠØ© Ø§Ù„Ù†ÙˆØ±",
        location: "Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ© - Ø³Ù…ÙˆØ­Ø©",
        phone: "+201234567890",
        whatsapp: "+201234567890",
        image: "images/pharmacies/pharmacy3.jpg",
        featured: true,
        rating: 4.8
    }
];

// Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø¯ÙˆÙŠØ© - Ù…Ø­Ø¯Ø«Ø©
const drugDatabase = {
    "Ø¨Ø§Ø±Ø§Ø³ÙŠØªØ§Ù…ÙˆÙ„": {
        name: "Ø¨Ø§Ø±Ø§Ø³ÙŠØªØ§Ù…ÙˆÙ„",
        description: "Ù…Ø³ÙƒÙ† Ù„Ù„Ø£Ù„Ù… ÙˆØ®Ø§ÙØ¶ Ù„Ù„Ø­Ø±Ø§Ø±Ø©",
        price: "15 Ø¬Ù†ÙŠÙ‡",
        image: "images/drugs/paracetamol.jpg",
        pharmacies: [1, 2, 3],
        category: "Ù…Ø³ÙƒÙ†Ø§Øª"
    },
    "ÙÙŠØªØ§Ù…ÙŠÙ† Ø³ÙŠ": {
        name: "ÙÙŠØªØ§Ù…ÙŠÙ† Ø³ÙŠ", 
        description: "Ù…ÙƒÙ…Ù„ ØºØ°Ø§Ø¦ÙŠ Ù„Ù…Ù‚Ø§ÙˆÙ…Ø© Ø§Ù„Ø£Ù…Ø±Ø§Ø¶",
        price: "30 Ø¬Ù†ÙŠÙ‡",
        image: "images/drugs/vitamin-c.jpg",
        pharmacies: [1, 2],
        category: "ÙÙŠØªØ§Ù…ÙŠÙ†Ø§Øª"
    },
    "Ø¨Ø±ÙˆÙÙŠÙ†": {
        name: "Ø¨Ø±ÙˆÙÙŠÙ†",
        description: "Ù…Ø³ÙƒÙ† Ù„Ù„Ø¢Ù„Ø§Ù… ÙˆÙ…Ø¶Ø§Ø¯ Ù„Ù„Ø§Ù„ØªÙ‡Ø§Ø¨Ø§Øª", 
        price: "25 Ø¬Ù†ÙŠÙ‡",
        image: "images/drugs/ibuprofen.jpg",
        pharmacies: [2, 3],
        category: "Ù…Ø³ÙƒÙ†Ø§Øª"
    }
};
// Ø¯Ø§Ù„Ø© Ù„Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ§Øª
function displayPharmacies() {
    const pharmaciesContainer = document.getElementById('pharmacies-container');
    
    if (!pharmaciesContainer) return;
    
    pharmaciesContainer.innerHTML = '';
    
    pharmaciesDatabase.forEach(pharmacy => {
        const pharmacyCard = `
            <div class="pharmacy-card ${pharmacy.featured ? 'featured-pharmacy' : ''}">
                ${pharmacy.featured ? '<div class="featured-badge">â­ Ù…Ù…ÙŠØ²Ø©</div>' : ''}
                
                <img src="${pharmacy.image}" 
                     alt="${pharmacy.name}"
                     class="pharmacy-image"
                     onerror="this.src='images/default.jpg'">
                
                <div class="pharmacy-header">
                    <div class="pharmacy-name">${pharmacy.name}</div>
                    <div class="pharmacy-rating">â­ ${pharmacy.rating}</div>
                </div>
                
                <div class="pharmacy-location">
                    ğŸ“ ${pharmacy.location}
                </div>
                
                <div class="pharmacy-contacts">
                    <button class="contact-btn phone-btn" onclick="callPharmacy('${pharmacy.phone}')">
                        ğŸ“ ${pharmacy.phone}
                    </button>
                    <button class="contact-btn whatsapp-btn" onclick="openWhatsApp('${pharmacy.whatsapp}')">
                        ğŸ’¬ ÙˆØ§ØªØ³Ø§Ø¨
                    </button>
                </div>
            </div>
        `;
        pharmaciesContainer.innerHTML += pharmacyCard;
    });
}

// Ø¯Ø§Ù„Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ§Øª ÙÙŠ ØµÙØ­Ø© Ø§Ù„Ø¯ÙˆØ§Ø¡
function displayPharmaciesForDrug(pharmacyIds) {
    return pharmacyIds.map(id => {
        const pharmacy = pharmaciesDatabase.find(p => p.id === id);
        if (!pharmacy) return '';
        
        return `
            <div class="pharmacy-item">
                <img src="${pharmacy.image}" 
                     alt="${pharmacy.name}"
                     class="pharmacy-thumb"
                     onerror="this.src='images/default.jpg'">
                <div class="pharmacy-info">
                    <strong>${pharmacy.name}</strong>
                    <p>ğŸ“ ${pharmacy.location}</p>
                    <p>â­ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…: ${pharmacy.rating}</p>
                    <div class="drug-contacts">
                        <a href="tel:${pharmacy.phone}" class="contact-link">ğŸ“ Ø§ØªØµÙ„</a>
                        <a href="https://wa.me/${pharmacy.whatsapp" target="_blank" class="contact-link">ğŸ’¬ ÙˆØ§ØªØ³Ø§Ø¨</a>
                    </div>
                </div>
            </div>
        `;
    }).join('');
}

// Ø¯ÙˆØ§Ù„ Ø§Ù„Ø§ØªØµØ§Ù„
function callPharmacy(phoneNumber) {
    window.location.href = `tel:${phoneNumber}`;
}

function openWhatsApp(whatsappNumber) {
    window.open(`https://wa.me/${whatsappNumber}`, '_blank');
}

// ØªØ´ØºÙŠÙ„ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
document.addEventListener('DOMContentLoaded', function() {
    displayPharmacies();
    displayDrugs();
});